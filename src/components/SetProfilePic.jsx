import styles from "../pages/Profile.module.css";
import { useRef } from "react";

export const SetProfilePic = ({ selectedImage, setSelectedImage }) => {
  const fileInputRef = useRef(null);

  const handleSvgClick = () => {
    fileInputRef.current.click();
  };

  const handleImageChange = (event) => {
    const file = event.target.files[0];
    if (file) {
      const imageURL = URL.createObjectURL(file);
      setSelectedImage(imageURL);
    }
  };

  return (
    <div className={styles.sideComp}>
      <img src={selectedImage} alt="person" className={styles.img} />
      <svg
        width="30"
        height="30"
        viewBox="0 0 30 30"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        onClick={handleSvgClick}
        style={{ cursor: "pointer" }}
      >
        <g clipPath="url(#clip0_1387_202)">
          <path
            d="M19.6875 15.9375C19.6875 17.1807 19.1936 18.373 18.3146 19.2521C17.4355 20.1311 16.2432 20.625 15 20.625C13.7568 20.625 12.5645 20.1311 11.6854 19.2521C10.8064 18.373 10.3125 17.1807 10.3125 15.9375C10.3125 14.6943 10.8064 13.502 11.6854 12.6229C12.5645 11.7439 13.7568 11.25 15 11.25C16.2432 11.25 17.4355 11.7439 18.3146 12.6229C19.1936 13.502 19.6875 14.6943 19.6875 15.9375Z"
            fill="black"
          />
          <path
            d="M3.75 7.5C2.75544 7.5 1.80161 7.89509 1.09835 8.59835C0.395088 9.30161 0 10.2554 0 11.25L0 22.5C0 23.4946 0.395088 24.4484 1.09835 25.1516C1.80161 25.8549 2.75544 26.25 3.75 26.25H26.25C27.2446 26.25 28.1984 25.8549 28.9016 25.1516C29.6049 24.4484 30 23.4946 30 22.5V11.25C30 10.2554 29.6049 9.30161 28.9016 8.59835C28.1984 7.89509 27.2446 7.5 26.25 7.5H24.0525C23.058 7.49979 22.1043 7.10456 21.4012 6.40125L19.8488 4.84875C19.1457 4.14544 18.192 3.75021 17.1975 3.75H12.8025C11.808 3.75021 10.8543 4.14544 10.1512 4.84875L8.59875 6.40125C7.89565 7.10456 6.94198 7.49979 5.9475 7.5H3.75ZM4.6875 11.25C4.43886 11.25 4.2004 11.1512 4.02459 10.9754C3.84877 10.7996 3.75 10.5611 3.75 10.3125C3.75 10.0639 3.84877 9.8254 4.02459 9.64959C4.2004 9.47377 4.43886 9.375 4.6875 9.375C4.93614 9.375 5.1746 9.47377 5.35041 9.64959C5.52623 9.8254 5.625 10.0639 5.625 10.3125C5.625 10.5611 5.52623 10.7996 5.35041 10.9754C5.1746 11.1512 4.93614 11.25 4.6875 11.25ZM21.5625 15.9375C21.5625 17.678 20.8711 19.3472 19.6404 20.5779C18.4097 21.8086 16.7405 22.5 15 22.5C13.2595 22.5 11.5903 21.8086 10.3596 20.5779C9.1289 19.3472 8.4375 17.678 8.4375 15.9375C8.4375 14.197 9.1289 12.5278 10.3596 11.2971C11.5903 10.0664 13.2595 9.375 15 9.375C16.7405 9.375 18.4097 10.0664 19.6404 11.2971C20.8711 12.5278 21.5625 14.197 21.5625 15.9375Z"
            fill="black"
          />
        </g>
        <defs>
          <clipPath id="clip0_1387_202">
            <rect width="30" height="30" fill="white" />
          </clipPath>
        </defs>
      </svg>
      <input
        type="file"
        accept="image/*"
        ref={fileInputRef}
        style={{ display: "none" }}
        onChange={handleImageChange}
      />
    </div>
  );
};
